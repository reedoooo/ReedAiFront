{
  "events": [
    {
      "event": "call",
      "http_server_request": {
        "path_info": "/src/api/chat/chat_session.jsx",
        "request_method": "GET",
        "headers": {
          "Host": "localhost:3000",
          "Connection": "keep-alive",
          "Sec-Ch-Ua": "\"Not/A)Brand\";v=\"8\", \"Chromium\";v=\"126\", \"Google Chrome\";v=\"126\"",
          "Origin": "http://localhost:3000",
          "Sec-Ch-Ua-Mobile": "?0",
          "User-Agent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/126.0.0.0 Safari/537.36",
          "Sec-Ch-Ua-Platform": "\"macOS\"",
          "Accept": "*/*",
          "Sec-Fetch-Site": "same-origin",
          "Sec-Fetch-Mode": "cors",
          "Sec-Fetch-Dest": "script",
          "Referer": "http://localhost:3000/src/api/index.jsx",
          "Accept-Encoding": "gzip, deflate, br, zstd",
          "Accept-Language": "en-US,en;q=0.9",
          "Cookie": "__stripe_mid=ebfd26b6-c829-4742-8893-abaf894eb93edc4c96; colorMode=%22dark%22",
          "If-None-Match": "W/\"b86-L/Gjiz3sHInjD2mtYa1RwTVzhao\""
        },
        "protocol": "HTTP/1.1"
      },
      "id": 1,
      "thread_id": 0
    },
    {
      "event": "return",
      "http_server_response": {
        "status_code": 200,
        "headers": {
          "Access-Control-Allow-Origin": "*",
          "Content-Type": "text/javascript",
          "Cache-Control": "no-cache",
          "Etag": "W/\"b86-Cp+gEsXBucdIaww0jjTcKR5pJSg\""
        },
        "return_value": {
          "class": "[ResponseBody]",
          "value": "import __vite__cjsImport0_mongoose from \"/node_modules/.vite/deps/mongoose.js?v=a0a28a61\"; const Types = __vite__cjsImport0_mongoose[\"Types\"];\nimport request from \"/src/utils/request/axios.jsx\";\nimport constants from \"/src/config/constants.jsx\";\nimport { fetchDefaultChatModel } from \"/src/api/chat/chat_model.jsx\";\nconst { API_URL, OPENAI_API_KEY } = constants;\nexport const getChatSessionDefault = async (userId, workspaceId, assistantId) => {\n  const default_model = await fetchDefaultChatModel();\n  const newId = new Types.ObjectId();\n  return {\n    name: \"Default Chat Session\",\n    topic: \"Default Chat Session\",\n    userId,\n    workspaceId,\n    assistantId,\n    model: default_model._id,\n    prompt: default_model.prompt,\n    active: { type: Boolean, required: false },\n    activeSessionId: newId,\n    settings: {\n      maxTokens: 500,\n      // max length of the completion\n      temperature: 0.7,\n      model: \"gpt-4-turbo-preview\",\n      topP: 1,\n      n: 4,\n      debug: false,\n      summarizeMode: false\n    },\n    messages: [\n      /* Array of chat messages */\n    ],\n    stats: {\n      tokenUsage: 0,\n      messageCount: 0\n    },\n    tuning: {\n      debug: false,\n      summary: \"\",\n      summarizeMode: false\n    }\n  };\n};\nexport const getChatSessionsByUser = async () => {\n  try {\n    const response = await request.get(\"/chat/chat_sessions/users\");\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexport const deleteChatSession = async (sessionId) => {\n  try {\n    const response = await request.delete(`/chat/chat_sessions/${sessionId}`);\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexport const createChatSession = async (sessionId, name, model) => {\n  try {\n    const response = await request.post(\"/chat/chat_sessions/create\", {\n      sessionId,\n      topic: name,\n      model\n    });\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexport const renameChatSession = async (sessionId, name) => {\n  try {\n    const response = await request.put(\n      `/chat/chat_sessions/session/${sessionId}/topic`,\n      {\n        topic: name\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexport const clearSessionChatMessages = async (sessionId) => {\n  try {\n    const response = await request.delete(\n      `/chat/chat_messages/chat_sessions/${sessionId}`\n    );\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\nexport const updateChatSession = async (sessionId, session_data) => {\n  try {\n    const response = await fetch(\n      `/chat/chat_sessions/update/${sessionId}`,\n      \"PUT\",\n      JSON.stringify(session_data),\n      {\n        \"Content-Type\": \"application/json\"\n      }\n    );\n    return response.data;\n  } catch (error) {\n    console.error(error);\n    throw error;\n  }\n};\n\n//# sourceMappingURL=data:application/json;base64,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RU8sYUFBTVUsb0JBQW9CLE9BQU9QLFdBQVdRLGlCQUFpQjtBQUNsRSxNQUFJO0FBQ0YsVUFBTWQsV0FBVyxNQUFNZTtBQUFBQSxNQUNyQiw4QkFBOEJULFNBQVM7QUFBQSxNQUN2QztBQUFBLE1BQ0FVLEtBQUtDLFVBQVVILFlBQVk7QUFBQSxNQUMzQjtBQUFBLFFBQ0UsZ0JBQWdCO0FBQUEsTUFDbEI7QUFBQSxJQUNGO0FBQ0EsV0FBT2QsU0FBU0U7QUFBQUEsRUFDbEIsU0FBU0MsT0FBTztBQUNkQyxZQUFRRCxNQUFNQSxLQUFLO0FBQ25CLFVBQU1BO0FBQUFBLEVBQ1I7QUFDRiIsIm5hbWVzIjpbIlR5cGVzIiwicmVxdWVzdCIsImNvbnN0YW50cyIsImZldGNoRGVmYXVsdENoYXRNb2RlbCIsIkFQSV9VUkwiLCJPUEVOQUlfQVBJX0tFWSIsImdldENoYXRTZXNzaW9uRGVmYXVsdCIsInVzZXJJZCIsIndvcmtzcGFjZUlkIiwiYXNzaXN0YW50SWQiLCJkZWZhdWx0X21vZGVsIiwibmV3SWQiLCJPYmplY3RJZCIsIm5hbWUiLCJ0b3BpYyIsIm1vZGVsIiwiX2lkIiwicHJvbXB0IiwiYWN0aXZlIiwidHlwZSIsIkJvb2xlYW4iLCJyZXF1aXJlZCIsImFjdGl2ZVNlc3Npb25JZCIsInNldHRpbmdzIiwibWF4VG9rZW5zIiwidGVtcGVyYXR1cmUiLCJ0b3BQIiwibiIsImRlYnVnIiwic3VtbWFyaXplTW9kZSIsIm1lc3NhZ2VzIiwic3RhdHMiLCJ0b2tlblVzYWdlIiwibWVzc2FnZUNvdW50IiwidHVuaW5nIiwic3VtbWFyeSIsImdldENoYXRTZXNzaW9uc0J5VXNlciIsInJlc3BvbnNlIiwiZ2V0IiwiZGF0YSIsImVycm9yIiwiY29uc29sZSIsImRlbGV0ZUNoYXRTZXNzaW9uIiwic2Vzc2lvbklkIiwiZGVsZXRlIiwiY3JlYXRlQ2hhdFNlc3Npb24iLCJwb3N0IiwicmVuYW1lQ2hhdFNlc3Npb24iLCJwdXQiLCJjbGVhclNlc3Npb25DaGF0TWVzc2FnZXMiLCJ1cGRhdGVDaGF0U2Vzc2lvbiIsInNlc3Npb25fZGF0YSIsImZldGNoIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJjaGF0X3Nlc3Npb24uanN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFR5cGVzIH0gZnJvbSAnbW9uZ29vc2UnO1xuaW1wb3J0IHJlcXVlc3QgZnJvbSAnQC91dGlscy9yZXF1ZXN0L2F4aW9zJztcbmltcG9ydCBjb25zdGFudHMgZnJvbSAnY29uZmlnL2NvbnN0YW50cyc7XG5pbXBvcnQgeyBmZXRjaERlZmF1bHRDaGF0TW9kZWwgfSBmcm9tICcuL2NoYXRfbW9kZWwnO1xuXG5jb25zdCB7IEFQSV9VUkwsIE9QRU5BSV9BUElfS0VZIH0gPSBjb25zdGFudHM7XG5cbmV4cG9ydCBjb25zdCBnZXRDaGF0U2Vzc2lvbkRlZmF1bHQgPSBhc3luYyAoXG4gIHVzZXJJZCxcbiAgd29ya3NwYWNlSWQsXG4gIGFzc2lzdGFudElkXG4pID0+IHtcbiAgY29uc3QgZGVmYXVsdF9tb2RlbCA9IGF3YWl0IGZldGNoRGVmYXVsdENoYXRNb2RlbCgpO1xuICBjb25zdCBuZXdJZCA9IG5ldyBUeXBlcy5PYmplY3RJZCgpOyAvLyBHZW5lcmF0ZSBPYmplY3RJZFxuICByZXR1cm4ge1xuICAgIG5hbWU6ICdEZWZhdWx0IENoYXQgU2Vzc2lvbicsXG4gICAgdG9waWM6ICdEZWZhdWx0IENoYXQgU2Vzc2lvbicsXG5cbiAgICB1c2VySWQ6IHVzZXJJZCxcbiAgICB3b3Jrc3BhY2VJZDogd29ya3NwYWNlSWQsXG4gICAgYXNzaXN0YW50SWQ6IGFzc2lzdGFudElkLFxuICAgIG1vZGVsOiBkZWZhdWx0X21vZGVsLl9pZCxcbiAgICBwcm9tcHQ6IGRlZmF1bHRfbW9kZWwucHJvbXB0LFxuXG4gICAgYWN0aXZlOiB7IHR5cGU6IEJvb2xlYW4sIHJlcXVpcmVkOiBmYWxzZSB9LFxuICAgIGFjdGl2ZVNlc3Npb25JZDogbmV3SWQsXG5cbiAgICBzZXR0aW5nczoge1xuICAgICAgbWF4VG9rZW5zOiA1MDAsIC8vIG1heCBsZW5ndGggb2YgdGhlIGNvbXBsZXRpb25cbiAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICBtb2RlbDogJ2dwdC00LXR1cmJvLXByZXZpZXcnLFxuICAgICAgdG9wUDogMSxcbiAgICAgIG46IDQsXG4gICAgICBkZWJ1ZzogZmFsc2UsXG4gICAgICBzdW1tYXJpemVNb2RlOiBmYWxzZSxcbiAgICB9LFxuXG4gICAgbWVzc2FnZXM6IFtcbiAgICAgIC8qIEFycmF5IG9mIGNoYXQgbWVzc2FnZXMgKi9cbiAgICBdLFxuXG4gICAgc3RhdHM6IHtcbiAgICAgIHRva2VuVXNhZ2U6IDAsXG4gICAgICBtZXNzYWdlQ291bnQ6IDAsXG4gICAgfSxcblxuICAgIHR1bmluZzoge1xuICAgICAgZGVidWc6IGZhbHNlLFxuICAgICAgc3VtbWFyeTogJycsXG4gICAgICBzdW1tYXJpemVNb2RlOiBmYWxzZSxcbiAgICB9LFxuICB9O1xufTtcblxuZXhwb3J0IGNvbnN0IGdldENoYXRTZXNzaW9uc0J5VXNlciA9IGFzeW5jICgpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QuZ2V0KCcvY2hhdC9jaGF0X3Nlc3Npb25zL3VzZXJzJyk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn07XG5cbmV4cG9ydCBjb25zdCBkZWxldGVDaGF0U2Vzc2lvbiA9IGFzeW5jIHNlc3Npb25JZCA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0LmRlbGV0ZShgL2NoYXQvY2hhdF9zZXNzaW9ucy8ke3Nlc3Npb25JZH1gKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGNyZWF0ZUNoYXRTZXNzaW9uID0gYXN5bmMgKHNlc3Npb25JZCwgbmFtZSwgbW9kZWwpID0+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHJlcXVlc3QucG9zdCgnL2NoYXQvY2hhdF9zZXNzaW9ucy9jcmVhdGUnLCB7XG4gICAgICBzZXNzaW9uSWQsXG4gICAgICB0b3BpYzogbmFtZSxcbiAgICAgIG1vZGVsLFxuICAgIH0pO1xuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59O1xuXG5leHBvcnQgY29uc3QgcmVuYW1lQ2hhdFNlc3Npb24gPSBhc3luYyAoc2Vzc2lvbklkLCBuYW1lKSA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF1ZXN0LnB1dChcbiAgICAgIGAvY2hhdC9jaGF0X3Nlc3Npb25zL3Nlc3Npb24vJHtzZXNzaW9uSWR9L3RvcGljYCxcbiAgICAgIHtcbiAgICAgICAgdG9waWM6IG5hbWUsXG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufTtcblxuZXhwb3J0IGNvbnN0IGNsZWFyU2Vzc2lvbkNoYXRNZXNzYWdlcyA9IGFzeW5jIHNlc3Npb25JZCA9PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXF... (5637 more characters)"
        }
      },
      "id": 2,
      "thread_id": 0,
      "parent_id": 1,
      "elapsed": 0.0002668329980224371
    }
  ],
  "version": "1.12",
  "metadata": {
    "client": {
      "name": "appmap-node",
      "version": "2.23.1",
      "url": "https://github.com/getappmap/appmap-node"
    },
    "language": {
      "name": "javascript",
      "engine": "Node.js",
      "version": "v20.15.1"
    },
    "app": "MyApp",
    "recorder": {
      "type": "requests",
      "name": "requests"
    },
    "name": "GET /src/api/chat/chat_session.jsx (200) — 2024-07-28T11:41:29.136Z"
  },
  "classMap": [
    {
      "type": "http",
      "name": "HTTP server requests",
      "children": [
        {
          "type": "route",
          "name": "GET /src/api/chat/chat_session.jsx"
        }
      ]
    }
  ]
}